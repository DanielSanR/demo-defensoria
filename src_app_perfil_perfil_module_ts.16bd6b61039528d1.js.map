{"version":3,"file":"src_app_perfil_perfil_module_ts.16bd6b61039528d1.js","mappings":"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","names":["UserService","constructor","http","storageService","formService","this","BehaviorSubject","loadUser","_this","getStorage2","then","res","console","log","setUser","user","_this2","saveStorage","update","Promise","resolve","getUser","isData","_this3","hasValue","next","getData","asObservable","i0","factory","routes","path","component","PerfilPage","formBuilder","userService","toastService","Subscription","ngOnInit","myForm","group","nombre","Validators","telefono","correo","direccion","loaded","sub","subscribe","patchForm","$obs","add","onSubmit","value","title","controls","toast","ionViewWillLeave","unsubscribe","patchValue","selectors","ctx","PerfilPageRoutingModule","RouterModule","PerfilPageModule","CommonModule","FormsModule","IonicModule","ReactiveFormsModule"],"sourceRoot":"webpack:///","sources":["./src/app/services/user.service.ts","./src/app/perfil/perfil.page.html","./src/app/perfil/perfil-routing.module.ts","./src/app/perfil/perfil.page.ts","./src/app/perfil/perfil.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Help } from '../models/Help';\r\nimport { map } from 'rxjs/operators';\r\nimport { StorageService } from './storage.service';\r\nimport { FormService } from './form.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  public user = new BehaviorSubject<any>(null);\r\n  public optionChosed: BehaviorSubject<any> = new BehaviorSubject(null);\r\n  constructor(public  http: HttpClient,\r\n    private storageService: StorageService,\r\n    private formService: FormService) {\r\n\r\n  }\r\n   async loadUser(){\r\n   await this.storageService.getStorage2('user').then(\r\n    res =>{\r\n    console.log(res);\r\n    }\r\n   );\r\n\r\n}\r\n\r\nasync setUser(user: any){\r\n     const b = await this.storageService.saveStorage('user',user);\r\n     await this.formService.update(user,'user');\r\n     return Promise.resolve(true);\r\n     //return Promise.resolve(false);\r\n}\r\n\r\n\r\n\r\nasync getUser(): Promise<boolean>{\r\nlet isData: boolean;\r\n  await this.storageService.hasValue('user').then(\r\n    res=>{\r\n        isData = res;\r\n    }\r\n  );\r\n    if(isData){\r\n        this.user.next(await  this.storageService.getStorage2('user'));\r\n        return Promise.resolve(true);\r\n    }\r\n    else{\r\n       return Promise.resolve(false);\r\n    }\r\n}\r\n\r\n getData(){\r\n    return this.user.asObservable();\r\n}\r\n}\r\n","\n \n<ion-content> \n  <ion-grid style=\"display: flex;flex-direction: row-reverse;padding: 0px;\">\n    <ion-row>\n      <ion-col size=\"12\">\n         <ion-button id=\"open-popover\" class=\"toolbar\" ><ion-icon slot=\"icon-only\"  name=\"ellipsis-horizontal\"></ion-icon></ion-button></ion-col>\n    </ion-row>\n  </ion-grid>\n<form style=\"padding-top:0px\" [formGroup]=\"myForm\" (ngSubmit)=\"onSubmit()\" novalidate>\n<ion-grid class=\"Grid \">\n  \n  <ion-row class=\"Grid-perfil\">\n    <ion-col class=\"Grid-perfil-col\" size=\"12\">\n      <div class=\"Grid-perfil-col-div\">\n      <img src=\"../../assets/images/perfil.png\" class=\"Grid-perfil-col-div-image\">\n        <ion-label class=\"Grid-perfil-col-div-label\">\n          <p class=\"Grid-perfil-col-div-label-p\">¡ Hola,</p>\n          <p class=\"Grid-perfil-col-div-label-p\">{{ loaded ? title : 'Queremos Conocerte más!'}}</p>\n        </ion-label>\n  </div>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item button class=\"datos\" lines=\"none\" [routerLink]=\"['/principal/preguntas-frecuentes']\">\n    <ion-label class=\"datos-label ion-text-center\">\n    <p class=\"datos-label-p\">Tips Y consejos </p>\n    </ion-label>  \n    <ion-icon class=\"datos-icon\" slot=\"end\" src=\"../../assets/icon/chevron-black.svg\" ></ion-icon>\n</ion-item> \n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Nombre</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"nombre\" placeholder=\"Mi nombre es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/nameForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Telefono</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"telefono\" placeholder=\"Mi telefono es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/phoneForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Correo electrónico</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"correo\" placeholder=\"Mi correo  es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/mailForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Dirección</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"direccion\" placeholder=\"Mi dirección es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/locationForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-button class=\"save\" type=\"submit\" [disabled]=\"!this.myForm.valid\">Actualizar</ion-button>\n</ion-col>\n  </ion-row>\n</ion-grid>\n</form>\n\n<ion-popover [keepContentsMounted]=\"true\" trigger=\"open-popover\" >\n  <ng-template >\n    <ion-content class=\"ion-padding\"  style=\"--background: #f4f4f4;\">\n     <ion-list  style=\"background: #f4f4f4;padding:0px;\">\n      <ion-list-header style=\"--background: #5A4BB2;border-radius: 8px;\">\n          <ion-label align=\"center\" style=\"\">\n            <h2 style=\"font-size: 16px;font-weight: 500;color:#fff\">Configuración</h2>\n          </ion-label>\n      </ion-list-header>\n      <ion-item class=\"lista\" button  lines=\"none\">\n        <ion-label>\n          <p>Elegír otro Formulario</p>\n        </ion-label>\n        <ion-icon style=\"color:#5A4BB2;\" name=\"chevron-forward-outline\"></ion-icon>\n      </ion-item>\n      <ion-item class=\"lista\" button   lines=\"none\">\n        <ion-label>\n          <p>Eliminar mis datos \n        </ion-label>\n        <ion-icon style=\"color:#5A4BB2;\" name=\"chevron-forward-outline\"></ion-icon>\n      </ion-item>\n      <ion-item  class=\"lista\" button  lines=\"none\">\n        <ion-label>\n          <p>Sobre nosotros</p>\n        </ion-label>\n        <ion-icon style=\"color:#5A4BB2;\" name=\"chevron-forward-outline\"></ion-icon>\n      </ion-item>\n     </ion-list>\n    </ion-content>\n  </ng-template>\n</ion-popover>\n</ion-content>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PerfilPage } from './perfil.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PerfilPageRoutingModule {}\n","/* eslint-disable @typescript-eslint/dot-notation */\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { FormService } from '../services/form.service';\nimport { Subscription } from 'rxjs';\nimport { UserService } from '../services/user.service';\nimport { ToastService } from '../services/toast.service';\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\nexport class PerfilPage implements OnInit {\n  myForm: FormGroup;\n  title: string;\n  $obs = new  Subscription();\n  loaded: boolean;\n  constructor(private formBuilder: FormBuilder,private formService: FormService,\n    private userService: UserService,\n    private toastService: ToastService) { }\n  async ngOnInit() {\n    this.myForm = this.formBuilder.group({\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      telefono: ['', [Validators.required, Validators.minLength(3)]],\n      correo: ['', [Validators.required,]],\n      direccion: ['',[Validators.required]],\n    });\n    this.loaded = await this.userService.getUser();\n    if(this.loaded){\n        const sub =  this.userService.getData().subscribe( res=> {this.patchForm(res);});\n        this.$obs.add(sub);\n    }\n  }\n\n  async onSubmit(){\n    //await this.formService.setPerfil(this.myForm.value);\n    const a = await this.userService.setUser(this.myForm.value);\n   if(a){\n    this.title = this.myForm.controls['nombre'].value;\n    this.loaded = true;\n    this.toastService.toast('Se actualizaron tus Datos! ','success');\n   }\n   else {\n   this.toastService.toast('Hubo un error al cargar tus datos :( ','danger');\n   }\n\n  }\n\n\n    ionViewWillLeave(){\n      this.$obs.unsubscribe();\n    }\n patchForm(res: any){\n    this.myForm.patchValue({\n         nombre: res.nombre,\n         telefono: res.telefono,\n         correo: res.correo,\n         direccion: res.direccion\n    });\n    this.title = res.nombre;\n  }\n\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PerfilPageRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [PerfilPage]\n})\nexport class PerfilPageModule {}\n"],"x_google_ignoreList":[]}