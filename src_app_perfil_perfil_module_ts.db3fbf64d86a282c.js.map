{"version":3,"file":"src_app_perfil_perfil_module_ts.db3fbf64d86a282c.js","mappings":"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","names":["UserService","constructor","http","storageService","formService","toastService","this","BehaviorSubject","environment","loadUser","_this","getStorage2","then","res","console","log","setUser","user","id","_this2","saveStorage","update","post","url","toPromise","status","next","toast","Promise","resolve","getUser","isData","_this3","hasValue","getData","asObservable","i0","factory","routes","path","component","PerfilPage","formBuilder","userService","Subscription","ngOnInit","myForm","group","name","Validators","phone","email","address","loaded","sub","subscribe","patchForm","$obs","add","onSubmit","value","title","controls","ionViewWillLeave","unsubscribe","patchValue","selectors","ctx","PerfilPageRoutingModule","RouterModule","PerfilPageModule","CommonModule","FormsModule","IonicModule","ReactiveFormsModule"],"sourceRoot":"webpack:///","sources":["./src/app/services/user.service.ts","./src/app/perfil/perfil.page.html","./src/app/perfil/perfil-routing.module.ts","./src/app/perfil/perfil.page.ts","./src/app/perfil/perfil.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Help } from '../models/Help';\r\nimport { map } from 'rxjs/operators';\r\nimport { StorageService } from './storage.service';\r\nimport { FormService } from './form.service';\r\nimport { ToastService } from './toast.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  public user = new BehaviorSubject<any>(null);\r\n  public optionChosed: BehaviorSubject<any> = new BehaviorSubject(null);\r\n  private url = environment.url;\r\n  constructor(public  http: HttpClient,\r\n    private storageService: StorageService,\r\n    private formService: FormService,\r\n    private toastService: ToastService) {\r\n\r\n  }\r\n   async loadUser(){\r\n   await this.storageService.getStorage2('user').then(\r\n    res =>{\r\n    console.log(res);\r\n    }\r\n   );\r\n\r\n}\r\n\r\nasync setUser(user: any){\r\n    const id = await this.storageService.getStorage2('id');\r\n     const b = await this.storageService.saveStorage('user',user);\r\n     await this.formService.update(user,'user');\r\n     try{\r\n     const response: any = await this.http.post(`${this.url}/help/${id}`,user).toPromise();\r\n     if(response.status){\r\n      this.storageService.saveStorage('user_update',true);\r\n      this.user.next(user);\r\n      this.toastService.toast('Datos guardados ! :)','success');\r\n      return Promise.resolve(true);\r\n      }\r\n    }\r\n    catch{\r\n      this.storageService.saveStorage('user_update',false);\r\n      this.toastService.toast('Hubo un error al cargar tus datos :( ','danger');\r\n      return Promise.resolve(false);\r\n    }\r\n}\r\n\r\n\r\n\r\nasync getUser(): Promise<boolean>{\r\nlet isData: boolean;\r\n  await this.storageService.hasValue('user').then(\r\n    res=>{\r\n        isData = res;\r\n    }\r\n  );\r\n    if(isData){\r\n        this.user.next(await  this.storageService.getStorage2('user'));\r\n        return Promise.resolve(true);\r\n    }\r\n    else{\r\n       return Promise.resolve(false);\r\n    }\r\n}\r\n\r\n getData(){\r\n    return this.user.asObservable();\r\n}\r\n}\r\n","\n \n<ion-content> \n  <ion-grid style=\"display: flex;flex-direction: row-reverse;padding: 0px;\">\n    <ion-row>\n      <ion-col size=\"12\">\n         <ion-button id=\"open-popover\" class=\"toolbar\" ><ion-icon slot=\"icon-only\"  name=\"ellipsis-horizontal\"></ion-icon></ion-button></ion-col>\n    </ion-row>\n  </ion-grid>\n<form style=\"padding-top:0px\" [formGroup]=\"myForm\" (ngSubmit)=\"onSubmit()\" novalidate>\n<ion-grid class=\"Grid \">\n  \n  <ion-row class=\"Grid-perfil\">\n    <ion-col class=\"Grid-perfil-col\" size=\"12\">\n      <div class=\"Grid-perfil-col-div\">\n      <img src=\"../../assets/images/perfil.png\" class=\"Grid-perfil-col-div-image\">\n        <ion-label class=\"Grid-perfil-col-div-label\">\n          <p class=\"Grid-perfil-col-div-label-p\">¡ Hola,</p>\n          <p class=\"Grid-perfil-col-div-label-p\">{{ loaded ? title : 'Queremos Conocerte más'}} !</p>\n        </ion-label>\n  </div>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item button class=\"datos\" lines=\"none\" [routerLink]=\"['/principal/preguntas-frecuentes']\">\n    <ion-label class=\"datos-label ion-text-center\">\n    <p class=\"datos-label-p\">Tips Y consejos </p>\n    </ion-label>  \n    <ion-icon class=\"datos-icon\" slot=\"end\" src=\"../../assets/icon/chevron-black.svg\" ></ion-icon>\n</ion-item> \n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Nombre</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"name\" placeholder=\"Mi nombre es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/nameForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Telefono</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"phone\" placeholder=\"Mi telefono es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/phoneForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Correo electrónico</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"email\" placeholder=\"Mi correo  es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/mailForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-item  class=\"form\" lines=\"none\" >\n    <ion-label class=\"form-label\" position=\"stacked\">Dirección</ion-label>\n    <ion-input class=\"form-label-p\" formControlName=\"address\" placeholder=\"Mi dirección es ...\"></ion-input>\n    <ion-icon src=\"../../assets/icon/locationForm.svg\"slot=\"start\"></ion-icon>\n</ion-item>\n</ion-col>\n<ion-col size=\"12\">\n  <ion-button class=\"save\" type=\"submit\" [disabled]=\"!this.myForm.valid\">Actualizar</ion-button>\n</ion-col>\n  </ion-row>\n</ion-grid>\n</form>\n\n<ion-popover [keepContentsMounted]=\"true\" trigger=\"open-popover\" >\n  <ng-template >\n    <ion-content class=\"ion-padding\"  style=\"--background: #f4f4f4;\">\n     <ion-list  style=\"background: #f4f4f4;padding:0px;\">\n      <ion-list-header style=\"--background: #5A4BB2;border-radius: 8px;\">\n          <ion-label align=\"center\" style=\"\">\n            <h2 style=\"font-size: 16px;font-weight: 500;color:#fff\">Configuración</h2>\n          </ion-label>\n      </ion-list-header>\n      <ion-item class=\"lista\" button  lines=\"none\">\n        <ion-label>\n          <p>Elegír otro Formulario</p>\n        </ion-label>\n        <ion-icon style=\"color:#5A4BB2;\" name=\"chevron-forward-outline\"></ion-icon>\n      </ion-item>\n      <ion-item class=\"lista\" button   lines=\"none\">\n        <ion-label>\n          <p>Eliminar mis datos \n        </ion-label>\n        <ion-icon style=\"color:#5A4BB2;\" name=\"chevron-forward-outline\"></ion-icon>\n      </ion-item>\n      <ion-item  class=\"lista\" button  lines=\"none\">\n        <ion-label>\n          <p>Sobre nosotros</p>\n        </ion-label>\n        <ion-icon style=\"color:#5A4BB2;\" name=\"chevron-forward-outline\"></ion-icon>\n      </ion-item>\n     </ion-list>\n    </ion-content>\n  </ng-template>\n</ion-popover>\n</ion-content>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PerfilPage } from './perfil.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PerfilPageRoutingModule {}\n","/* eslint-disable @typescript-eslint/dot-notation */\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { FormService } from '../services/form.service';\nimport { Subscription } from 'rxjs';\nimport { UserService } from '../services/user.service';\nimport { ToastService } from '../services/toast.service';\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\nexport class PerfilPage implements OnInit {\n  myForm: FormGroup;\n  title: string;\n  $obs = new  Subscription();\n  loaded: boolean;\n  constructor(private formBuilder: FormBuilder,private formService: FormService,\n    private userService: UserService,\n    private toastService: ToastService) { }\n  async ngOnInit() {\n    this.myForm = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.minLength(3)]],\n      phone: ['', [Validators.required, Validators.minLength(3)]],\n      email: ['', [Validators.required,]],\n      address: ['',[Validators.required]],\n    });\n    this.loaded = await this.userService.getUser();\n    if(this.loaded){\n        const sub =  this.userService.getData().subscribe( res=> {this.patchForm(res);});\n        this.$obs.add(sub);\n    }\n  }\n\n  async onSubmit(){\n    const a = await this.userService.setUser(this.myForm.value);\n   if(a){\n    this.title = this.myForm.controls['name'].value;\n    this.loaded = true;\n   }\n   else {\n    this.loaded = true;\n   }\n\n  }\n\n\n    ionViewWillLeave(){\n      this.$obs.unsubscribe();\n    }\n patchForm(res: any){\n    this.myForm.patchValue({\n         name: res.name,\n         phone: res.phone,\n         email: res.email,\n         address: res.address\n    });\n    this.title = res.name;\n  }\n\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PerfilPageRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [PerfilPage]\n})\nexport class PerfilPageModule {}\n"],"x_google_ignoreList":[]}