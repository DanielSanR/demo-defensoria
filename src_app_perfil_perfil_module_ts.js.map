{"version":3,"file":"src_app_perfil_perfil_module_ts.js","mappings":"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","sources":["./src/app/perfil/perfil-routing.module.ts","./src/app/perfil/perfil.module.ts","./src/app/perfil/perfil.page.ts","./src/app/services/user.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PerfilPage } from './perfil.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PerfilPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PerfilPageRoutingModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [PerfilPage]\n})\nexport class PerfilPageModule {}\n","/* eslint-disable @typescript-eslint/dot-notation */\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { FormService } from '../services/form.service';\nimport { Subscription } from 'rxjs';\nimport { UserService } from '../services/user.service';\nimport { ToastService } from '../services/toast.service';\nimport { ModalController, PopoverController, AlertController } from '@ionic/angular';\nimport { SobreNosotrosPage } from '../sobre-nosotros/sobre-nosotros.page';\nimport { Route, Router } from '@angular/router';\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\n\nexport class PerfilPage implements OnInit {\n  myForm: FormGroup;\n  title: string;\n  $obs = new  Subscription();\n  loaded: boolean;\n\n  constructor(private formBuilder: FormBuilder,private formService: FormService,\n    private userService: UserService,\n    private toastService: ToastService,\n    private modalCtrl: ModalController,\n    private alertController: AlertController,\n    private router: Router\n     ) { }\n  async ngOnInit() {\n    this.myForm = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.minLength(3)]],\n      phone: ['', [Validators.required, Validators.minLength(3)]],\n      email: ['', [Validators.required,]],\n      address: ['',[Validators.required]],\n    });\n    this.loaded = await this.userService.getUser();\n    if(this.loaded){\n        const sub =  this.userService.getData().subscribe( res=> {this.patchForm(res);});\n        this.$obs.add(sub);\n    }\n  }\n\n  async onSubmit(){\n    const a = await this.userService.setUser(this.myForm.value);\n   if(a){\n    this.title = this.myForm.controls['name'].value;\n    this.loaded = true;\n   }\n   else {\n    this.loaded = true;\n   }\n\n  }\n\n\n    ionViewWillLeave(){\n      this.$obs.unsubscribe();\n    }\n patchForm(res: any){\n    this.myForm.patchValue({\n         name: res.name,\n         phone: res.phone,\n         email: res.email,\n         address: res.address\n    });\n    this.title = res.name;\n  }\n\n  async modalAboutUs(){\n    const modal = await this.modalCtrl.create({\n      component: SobreNosotrosPage,\n    });\n    modal.present();\n    await modal.onWillDismiss();\n  }\n\n  async changeForm(){\n    const alert = await this.alertController.create({\n      header: 'EstÃ¡s seguro?',\n      buttons: [\n        {\n          text: 'No',\n          cssClass: 'alert-button-cancel',\n        },\n        {\n          text: 'Si',\n          cssClass: 'alert-button-confirm',\n          handler: () => {\n            this.userService.clearData();\n          },\n        },\n      ],\n    });\n\n    await alert.present();\n  }\n\n}\n\n\n","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Help } from '../models/Help';\r\nimport { map } from 'rxjs/operators';\r\nimport { StorageService } from './storage.service';\r\nimport { FormService } from './form.service';\r\nimport { ToastService } from './toast.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Router } from '@angular/router';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  public user = new BehaviorSubject<any>(null);\r\n  public optionChosed: BehaviorSubject<any> = new BehaviorSubject(null);\r\n  private url = environment.url;\r\n  constructor(public  http: HttpClient,\r\n    private storageService: StorageService,\r\n    private formService: FormService,\r\n    private toastService: ToastService,\r\n    private router: Router) {\r\n\r\n  }\r\n   async loadUser(){\r\n   await this.storageService.getStorage2('user').then(\r\n    res =>{\r\n    console.log(res);\r\n    }\r\n   );\r\n\r\n}\r\n\r\nasync setUser(user: any){\r\n    const id = await this.storageService.getStorage2('id');\r\n     const b = await this.storageService.saveStorage('user',user);\r\n     await this.formService.update(user,'user');\r\n     try{\r\n     const response: any = await this.http.post(`${this.url}/help/${id}`,user).toPromise();\r\n     if(response.status){\r\n      this.storageService.saveStorage('user_update',true);\r\n      this.user.next(user);\r\n      this.toastService.toast('Datos guardados ! :)','success');\r\n      return Promise.resolve(true);\r\n      }\r\n    }\r\n    catch{\r\n      this.storageService.saveStorage('user_update',false);\r\n      this.toastService.toast('Hubo un error al cargar tus datos :( ','danger');\r\n      return Promise.resolve(false);\r\n    }\r\n}\r\n\r\n\r\n\r\nasync getUser(): Promise<boolean>{\r\nlet isData: boolean;\r\n  await this.storageService.hasValue('user').then(\r\n    res=>{\r\n        isData = res;\r\n    }\r\n  );\r\n    if(isData){\r\n        this.user.next(await  this.storageService.getStorage2('user'));\r\n        return Promise.resolve(true);\r\n    }\r\n    else{\r\n       return Promise.resolve(false);\r\n    }\r\n}\r\n\r\n getData(){\r\n    return this.user.asObservable();\r\n}\r\n\r\n clearData(){\r\n   this.storageService.clearData();\r\n   this.router.navigate(['onboarding'],{replaceUrl: true});\r\n}\r\n}\r\n"],"names":["Component","FormBuilder","Validators","FormService","Subscription","UserService","ToastService","ModalController","AlertController","SobreNosotrosPage","Router","PerfilPage","constructor","formBuilder","formService","userService","toastService","modalCtrl","alertController","router","ngOnInit","myForm","group","name","required","minLength","phone","email","address","loaded","getUser","sub","getData","subscribe","res","patchForm","$obs","add","onSubmit","a","setUser","value","title","controls","ionViewWillLeave","unsubscribe","patchValue","modalAboutUs","modal","create","component","present","onWillDismiss","changeForm","alert","header","buttons","text","cssClass","handler","clearData","selector","template","Injectable","BehaviorSubject","HttpClient","StorageService","environment","http","storageService","url","loadUser","getStorage2","then","console","log","user","id","b","saveStorage","update","response","post","toPromise","status","next","toast","Promise","resolve","isData","hasValue","asObservable","navigate","replaceUrl","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}